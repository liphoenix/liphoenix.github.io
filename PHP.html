经历了多个棋牌游戏的开发，决定把开发过程中遇到的问题及踩过的坑总结一下，分享出来，互相学习，共同进步。
 
一、前奏
开发语言采用了nodejs，使用socket作为前后端的全双工通讯方案。
Nodejs社区目前有很多不错socket框架。直接贴上github地址：
https://github.com/socketio/socket.io
https://github.com/JaspervRijbroek/raddish
https://github.com/socketio/engine.io
https://github.com/primus/primus
提供一位大神对各个socket框架性能分析结果报告。
地址：http://blog.csdn.net/pangguoming/article/details/50619393
至于想用哪个框架孰强孰弱结合项目实际应用自行评估。俗话说得好：最好的不一定最合适，最合适的一定是最好的。
 
Npm目前的社区相当活跃，很多功能都是现成的，拿来就用，几乎不用自己写，认真研究和学习这些现成的模块、功能等，在自己的项目中合理的利用，不但可以让自己的开发工作事半功倍，认真研读这些开源项目的代码还可以快速提高自己的编码水平和架构能力。
以下是几个最常使用的npm命令：
npm install 包名 [-g] 安装某个应用.带上-g则全局安装
npm root -g 查看全局包地址
npm uninstall 包名卸载
npm init 生成一个package.json
npm config list 查看npm配置信息或者去用户目录下查看.npmrc
 
二、时间、代码最优与易维护
在国内的互联网圈子，项目时间紧是家常便饭，而负责开发一个项目的团队往往水平参差不齐，这个时候如何平衡开发时间与架构、代码最优，以及易维护性之间的关系，往往决定了一个项目的成败。
我们的做法是，先由团队中的“大牛”制定基本的架构框架和开发原则，再按照业务需求，快速实现功能。这时，“大牛”的架构制定及开发原则起到了至关重要的作用，最好结合业务需求及上线时间，综合考虑开发难度来制定，不要一味追求技术最优或者高可维护，采用迭代开发和渐进最优，能够保证项目的成功上线。当然，适时的重构也是必须的，否则容易将前期的技术债和代码坑越挖越大、越挖越深，直至不可控。
而对于团队中的普通成员，开发时必须遵守已制定的开发准则及开发规范，并且代码应该做交叉review，至少保证每行代码的局部最优。
最后，团队中的几个leader应该定期review团队成员的代码，做整体的优化和调整。
 
三、告别曾经踩过的坑
人人说高并发，但如何处理的很到位这里学问就很大了。由于资历有限，此处只说说代码层面的业务逻辑处理
1.上锁
比如前端发起A操作,经过验证无误后为该操作上锁,确保唯一性同一时间同一地点只能执行一次
2.队列命令操作
同样是需要确保同一时间同一地点只能执行某个动作,但是同一个命令操作可以执行多次,前端发来命令加入命令队列中等待被执行
3.避免倒计时与用户操作重叠
4.在重要业务逻辑场景加锁,保证业务逻辑唯一性
5.异常处理
异常处理就显得非常重要了,比如:游戏过程中突然卡住怎么办?经常人为的处理让时间还是浪费人力资源得不偿失.
6.报警系统
由异常处理捕获的问题,丢到报警系统中处理.最后已邮件或者短信的形式通知到所有人.
